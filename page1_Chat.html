<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="css/main.css"/>
		<script src="js/mui.min.js"></script>
		<script type="text/javascript">
			mui.init()
		</script>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
		    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
		    <h1 class="mui-title"></h1>
		</header>
		
		<div class="mui-content">
			<span id="">
				此处为发送的消息：
			</span>
		    <div id="msg"></div>
		</div>
		
		<button id="photo" type="button" class="mui-btn mui-btn-blue mui-btn-block">相册</button>
		<button id="camera" type="button" class="mui-btn mui-btn-blue mui-btn-block">摄像头</button>
		<button id="getacc" type="button" class="mui-btn mui-btn-blue mui-btn-block">重力感应</button>
		
		<nav class="mui-bar mui-bar-tab ">
		    <span class="mui-icon mui-icon-mic voice"></span>
		    <input class="wcChatInput" type="" name="" id="" value="" />
		    <span class="mui-icon mui-icon-info emoji"></span>
		    <span class="mui-icon mui-icon-plus more"></span>
		</nav>
		
		<script type="text/javascript">
			mui.plusReady(function(){
				
				//创建新窗体
				var cw = plus.webview.currentWebview();
				//获取page1传过来的title值
				var titleName = cw.title;
				//获取要写入titie的dom
				var header = document.querySelector(".mui-title");
				//给title写入传过来的title值
				header.innerText = titleName;
				
				//获取相册按钮，发送图片方法
				var photo =document.getElementById("photo");
				//获取放置发送图片的div
				var msgImg = document.getElementById("msg");
				
				//监听点击事件
				photo.addEventListener("tap",function(){
					// 调用相册功能 path为图片路径
					plus.gallery.pick(function(path){
						var img = "";
						for(var i in path.files)
							img += "<img class='width30' src="+path.files[i]+"/>";
						msgImg.innerHTML = img;
						
					},
					function(e){
						msgImg.innerHTML = e.Message;
					},
					{
						filter:"none",
						multiple:true
					}
					);
				});
				
				//摄像头方法
				//获取摄像头按钮，发送图片方法
				var camera =document.getElementById("camera");
				camera.addEventListener('tap',function(){
					//获取摄像头 0为前置摄像头，1为后置摄像头
					var cm = plus.camera.getCamera(1);
					cm.captureImage(function(path){
						//获取本地拍照的路径
						var url = "file://"+plus.io.convertLocalFileSystemURL(path);
						var img ="<img class='width30' src="+url+"/>";
						msgImg.innerHTML = img;
					})
				});
				
				//重力感应方法
				var acc = document.getElementById("getacc");
				acc.addEventListener("tap",function(e){
					//实时监测xyz的值
					//plus.accelerometer.watchAcceleration(function(a){
					//只获取一次xyz的值
					plus.accelerometer.getCurrentAcceleration(function(a){
						var msg = document.getElementById("msg");
						//获取3个方向的值x，y，z，
						msg.innerText = "X:"+a.xAxis+"\n y:"+a.yAxis+"\n z:"+a.zAxis;
						
					});
				});
				
			});
		</script>
	</body>

</html>